(function(t){function e(e){for(var r,n,a=e[0],c=e[1],l=e[2],p=0,m=[];p<a.length;p++)n=a[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],r=!0,a=1;a<i.length;a++){var c=i[a];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var r={},s={app:0},o=[];function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},3850:function(t,e,i){"use strict";var r=i("c014"),s=i.n(r);s.a},"435f":function(t,e){t.exports="data:image/png;base64,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"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"nav"},t._l(t.routes,(function(e){return i("router-link",{key:e.name,attrs:{to:e.path}},[t._v(t._s(e.name)+" ")])})),1),i("div",{staticClass:"map-main"},[i("router-view")],1)])},o=[],n={name:"App",components:{},data:function(){return{routes:[]}},mounted:function(){this.routes=this.$router.options.routes}},a=n,c=(i("5c0b"),i("2877")),l=Object(c["a"])(a,s,o,!1,null,null,null),u=l.exports,p=i("8c4f"),m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[i("div",{attrs:{id:"HomeButton"}}),i("div",{attrs:{id:"LocateButton"}}),i("div",{staticClass:"navigation-toolbar",attrs:{id:"navigation-toolbar"}},[i("div",{staticClass:"nt-translation"},[i("button",{attrs:{id:"resize"}}),i("button",{attrs:{id:"east"}}),i("button",{attrs:{id:"west"}}),i("button",{attrs:{id:"south"}}),i("button",{attrs:{id:"north"}})]),i("div",{staticClass:"nt-zoom"},[i("div",{staticClass:"rule"}),i("button",{attrs:{id:"site"}}),i("button",{attrs:{id:"zoomUp"}}),i("button",{attrs:{id:"zoomDowm"}})])])])}],g=(i("d81d"),i("ac1f"),i("1276"),i("afaa")),y={name:"InitMap",data:function(){return{navToolbar:null,map:"",gisConstructor:{},gisModules:["esri/toolbars/navigation","dojo/_base/declare","esri/dijit/OverviewMap","esri/dijit/Scalebar","esri/dijit/LocateButton","esri/dijit/HomeButton","esri/layers/OpenStreetMapLayer","esri/geometry/Extent","esri/map"]}},mounted:function(){this.init()},methods:{mapClickFun:function(){this.map.on("click",(function(t){console.log(t)}))},init:function(){Object(g["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(g["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.mapClickFun)},initMap:function(t){var e=this;for(var i in t){var r=this.gisModules[i].split("/").pop();this.gisConstructor[r]=t[i]}var s=new this.gisConstructor.OpenStreetMapLayer({id:"OSMlayer",visible:!0,opacity:1});this.map=new this.gisConstructor.map("map-container",{zoom:12,logo:!1,slider:!0}),this.map.addLayer(s);var o={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(o.xmin,o.ymin,o.xmax,o.ymax));var n=new this.gisConstructor.HomeButton({map:this.map},"HomeButton");n.startup();var a=new this.gisConstructor.LocateButton({map:this.map},"LocateButton");a.startup();new this.gisConstructor.Scalebar({map:this.map,scalebarUnit:"metric"});for(var c=document.getElementById("navigation-toolbar"),l=c.querySelectorAll("button"),u="",p=0;p<l.length;p++)"site"===l[p].getAttribute("id")&&(u=l[p],u.style.top=this.map.getLevel()+20+"px"),l[p].onclick=function(t){var i=t.target.getAttribute("id");switch(i){case"resize":e.map.setExtent(new e.gisConstructor.Extent(o.xmin,o.ymin,o.xmax,o.ymax));break;case"east":e.map.panRight();break;case"west":e.map.panLeft();break;case"north":e.map.panDown();break;case"south":e.map.panUp();break;case"zoomUp":e.map.setLevel(e.map.getLevel()+1);break;case"zoomDowm":e.map.setLevel(e.map.getLevel()-1);break;case"site":break}u.style.top=e.map.getLevel()+20+"px"};u.style.top=this.map.getLevel()+20+"px"}}},d=y,f=(i("3850"),Object(c["a"])(d,m,h,!1,null,null,null)),v=f.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[i("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999",width:"200px"}},[i("el-tree",{ref:"tree2",attrs:{data:t.treeData2,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":t.handleCheckChange2}}),i("hr"),i("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":t.handleCheckChange}})],1)])},C=[],S=(i("4160"),i("159b"),{name:"MapServer",data:function(){return{SF311Layer:null,DamageAssessmentLayer:null,haveSublayers:null,defaultProps:{children:"children",label:"label"},treeData2:[{label:"StoryMapPlaces5",id:"StoryMapPlaces5"},{label:"StoryMapPlaces7",id:"StoryMapPlaces7"}],treeData:[{label:"Cities",id:0},{label:"Highways",id:1},{label:"States",id:2},{label:"Counties",id:3}],map:"",gisConstructor:{},gisModules:["esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/geometry/Extent","esri/map"]}},mounted:function(){this.init()},methods:{handleCheckChange2:function(){var t=this,e=this.$refs.tree2.getCheckedKeys(),i=this.treeData2.map((function(t){return t.label}));i.forEach((function(e){var i=t.map.getLayer(e);i.setVisibility(!1)})),e.forEach((function(e){var i=t.map.getLayer(e);i.setVisibility(!0)}))},handleCheckChange:function(){var t=this.$refs.tree.getCheckedKeys(),e=this.map.getLayer("DamageAssessment");e.setVisibility(!1),e.setVisibility(!0),e.setVisibleLayers(t)},loadLayersFun:function(){for(var t=[{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces5/MapServer",id:"StoryMapPlaces5",opacity:1,visible:!1,type:"dynamic"},{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces7/MapServer",id:"StoryMapPlaces7",opacity:1,visible:!1,type:"dynamic"},{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",id:"DamageAssessment",opacity:.5,visible:!1,type:"dynamic"}],e=0;e<t.length;e++)if("dynamic"===t[e].type){var i=new this.gisConstructor.ArcGISDynamicMapServiceLayer(t[e].url,{id:t[e].id,opacity:t[e].opacity||1,visible:t[e].visible});this.map.addLayer(i)}},mapClickFun:function(){this.map.on("click",(function(t){console.log(t)}))},init:function(){Object(g["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(g["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.loadLayersFun).then(this.mapClickFun)},initMap:function(t){for(var e in t){var i=this.gisModules[e].split("/").pop();this.gisConstructor[i]=t[e]}this.map=new this.gisConstructor.map("map-container",{basemap:"osm",logo:!1,slider:!0});var r={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax))}}}),w=S,A=Object(c["a"])(w,b,C,!1,null,null,null),x=A.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[i("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999"}},[i("button",{on:{click:function(e){return t.addCustomSymbols(t.symbolData)}}},[t._v("自定义标注")]),i("button",{on:{click:function(e){return t.clearCustomSymbols()}}},[t._v("清除标注")])])])},L=[],k=(i("4de4"),{name:"CustomSymbols",data:function(){return{symbolData:[{address:"marker1",x:-13043465.062410325,y:3857375.365345625,type:1},{address:"marker2",x:-13041492.031617718,y:3857031.398718342,type:2},{address:"marker3",x:-13041042.964076541,y:3855808.4062657813,type:2},{address:"marker4",x:-13044606.840520333,y:3854317.8842142224,type:3},{address:"marker5",x:-13043035.104126222,y:3855120.4730112157,type:3}],positionLayer:"",customSymbolsLayer:"",gisConstructor:{},gisModules:["esri/SpatialReference","esri/Color","esri/symbols/PictureMarkerSymbol","esri/symbols/TextSymbol","esri/symbols/Font","esri/geometry/Extent","esri/geometry/Point","esri/layers/GraphicsLayer","esri/graphic","esri/map"],map:""}},mounted:function(){this.init()},methods:{mapClickFun:function(){this.map.on("click",(function(t){console.log(t)}))},setCenterAndZoom:function(t,e){var r=new this.gisConstructor.Point(t[0],t[1],new this.gisConstructor.SpatialReference(this.map.spatialReference));e?(this.map.centerAt(r),this.map.centerAndZoom(r,e)):this.map.centerAt(r),this.clearCustomSymbols("定位图层");var s=i("78e1"),o=new this.gisConstructor.PictureMarkerSymbol(s,50,50),n=new this.gisConstructor.graphic(r,o);this.positionLayer.add(n)},clearCustomSymbols:function(t){if(t){var e=this.map.getLayer(t);e&&e.clear()}else{var i=this.map.getScale(),r=this.map.getLayersVisibleAtScale(i),s=r.filter((function(t){return"custom-layer"===t.className}));s.forEach((function(t){t.clear()}))}},addCustomSymbols:function(t){this.clearCustomSymbols("自定义标注图层");for(var e="",r=new this.gisConstructor.Font("16px"),s=0;s<t.length;s++){e=1===t[s].type?i("435f"):2===t[s].type?i("ff2f"):i("ad16");var o=new this.gisConstructor.Point(t[s].x,t[s].y,new this.gisConstructor.SpatialReference(this.map.spatialReference)),n=new this.gisConstructor.PictureMarkerSymbol({url:e,height:20,width:20}),a=new this.gisConstructor.graphic(o,n,t[s]);this.customSymbolsLayer.add(a);var c=new this.gisConstructor.TextSymbol(t[s].address,r,new this.gisConstructor.Color([0,0,0])),l=this.gisConstructor.Color("#fff");c.setOffset(0,15).setHaloColor(l).setHaloSize(2);var u=new this.gisConstructor.graphic(new this.gisConstructor.Point(t[s].x,t[s].y,new this.gisConstructor.SpatialReference(this.map.spatialReference)),c);this.customSymbolsLayer.add(u)}},init:function(){Object(g["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(g["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.addCustomLayer).then(this.mapClickFun)},addCustomLayer:function(){var t=this;this.positionLayer=new this.gisConstructor.GraphicsLayer({id:"定位图层",className:"custom-layer"}),this.map.addLayer(this.positionLayer),this.customSymbolsLayer=new this.gisConstructor.GraphicsLayer({id:"自定义标注图层",className:"custom-layer"}),this.map.addLayer(this.customSymbolsLayer),this.customSymbolsLayer.on("click",(function(e){if(e.graphic.attributes){console.log(e.graphic.attributes);var i=[e.graphic.attributes.x,e.graphic.attributes.y];t.setCenterAndZoom(i)}}))},initMap:function(t){for(var e in t){var i=this.gisModules[e].split("/").pop();this.gisConstructor[i]=t[e]}this.map=new this.gisConstructor.map("map-container",{basemap:"osm",logo:!1,slider:!0,wkid:"4490"});var r={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax))}}}),E=k,G=Object(c["a"])(E,M,L,!1,null,null,null),P=G.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[i("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999"}},[i("span",[t._v("标绘：")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("标绘","point")}}},[t._v("点")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("标绘","polyline")}}},[t._v("线")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("标绘","polygon")}}},[t._v("面")]),i("br"),i("span",[t._v("空间测量：")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间测量","point")}}},[t._v("坐标测量")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间测量","polyline")}}},[t._v("距离测量")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间测量","polygon")}}},[t._v("面积测量")]),i("br"),i("span",[t._v("空间统计：")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间统计","point")}}},[t._v("点")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间统计","polyline")}}},[t._v("线")]),i("button",{on:{click:function(e){return t.drawingGraphicsTool("空间统计","polygon")}}},[t._v("面")]),i("br"),i("button",{on:{click:function(e){return t.drawingGraphicsTool()}}},[t._v("clear")])])])},O=[],R=(i("b0c0"),i("a9e3"),i("b680"),null),U=null,j={};function B(t){var e="<div><p>经度："+t.geometry.x.toFixed(6)+"</p><p>纬度："+t.geometry.y.toFixed(6)+"</p></div>";this.map.infoWindow.resize(200,100),this.map.infoWindow.setTitle("坐标信息"),this.map.infoWindow.setContent(e),this.map.infoWindow.show(t.geometry),this.map.infoWindow.on("hide",(function(){}))}function F(){return{url:i("435f"),height:20,width:20,type:"esriPMS",angle:0}}function D(t){return"fill"===t?new this.gisConstructor.Color([255,0,0,.25]):new this.gisConstructor.Color([255,0,0,.8])}function I(){return{color:D.call(this,"line"),width:2}}function Y(t){var e=this;return{text:t,color:[255,0,0],font:new e.gisConstructor.Font({family:"microsoft Yahei",size:8,style:"normal",weight:"bold"}),haloColor:[255,255,255],haloSize:2,horizontalAlignment:"center",xoffset:0,yoffset:0}}function N(t){for(var e=R.graphics,i=e.length-1;i>=0;i--)e[i].attributes.id&&e[i].attributes.id===t&&R.remove(e[i])}function H(t){if(t.graphic&&t.graphic.attributes){var e=t.graphic.attributes;N(e.id)}}function z(t){var e=j.StatisticalServerURL||"",i=new this.gisConstructor.query;i.geometry=t,i.outFields=["*"],i.returnGeometry=!0;var r=new this.gisConstructor.QueryTask(e);r.execute(i,(function(t){console.log(t)}),(function(t){console.log(t)}))}function V(t){var e=this,i=this,r="",s=t.geometry.type,o="",n="symbolMarker"+(new Date).getTime();if("标绘"===j.name&&("point"===s?(o=new this.gisConstructor.PictureMarkerSymbol(F.call(this)),R.add(new this.gisConstructor.graphic(t.geometry,o,{id:n,name:"图形标注"}))):"polyline"===s?(o=new this.gisConstructor.SimpleLineSymbol(I.call(this)),R.add(new this.gisConstructor.graphic(t.geometry,o,{id:n,name:"图形标注"}))):"polygon"===s&&(o=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new this.gisConstructor.SimpleLineSymbol(I.call(this)),D.call(this,"fill")),R.add(new this.gisConstructor.graphic(t.geometry,o,{id:n,name:"图形标注"})))),"空间测量"===j.name)if("point"===s)B.call(this,t);else if("polyline"===s){o=new this.gisConstructor.SimpleLineSymbol(I.call(this)),R.add(new this.gisConstructor.graphic(t.geometry,o,{id:n,name:"图形标注"}));var a=new i.gisConstructor.LengthsParameters,c=new i.gisConstructor.GeometryService(j.GeometryServerURL);a.distanceUnit=i.gisConstructor.GeometryService.UNIT_KILOMETER,a.calculationType="preserveShape";var l=new i.gisConstructor.Polyline(i.map.spatialReference),u=t.geometry.paths[0];l.addPath(u),a.polylines=[l],c.lengths(a,(function(r){var s=i.gisConstructor.number.format(r.lengths[0]),o="总长度:"+s+"米",a=new i.gisConstructor.TextSymbol(Y.call(e,o)),c=t.geometry.getExtent().getCenter(),l=new i.gisConstructor.Point(c,i.map.spatialReference),u=new i.gisConstructor.graphic(l,a,{id:n,name:"图形标注"});R.add(u)}))}else if("polygon"===s){o=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new this.gisConstructor.SimpleLineSymbol(I.call(this)),D.call(this,"fill")),R.add(new this.gisConstructor.graphic(t.geometry,o,{id:n,name:"图形标注"}));var p=new this.gisConstructor.AreasAndLengthsParameters,m=new this.gisConstructor.GeometryService(j.GeometryServerURL);p.areaUnit=this.gisConstructor.GeometryService.UNIT_SQUARE_KILOMETERS,p.calculationType="preserveShape",m.simplify([t.geometry],(function(i){p.polygons=i,m.areasAndLengths(p,(function(i){var r=e.gisConstructor.number.format(i.areas[0]),s=r+"平方公里",o=new e.gisConstructor.TextSymbol(Y.call(e,s)),a=t.geometry.getExtent().getCenter(),c=new e.gisConstructor.Point(a,e.map.spatialReference),l=new e.gisConstructor.graphic(c,o,{id:n,name:"图形标注"});R.add(l)}))}))}if("空间统计"===j.name){"point"===s?r=new this.gisConstructor.SimpleMarkerSymbol(this.gisConstructor.SimpleMarkerSymbol.STYLE_SQUARE,10,new this.gisConstructor.SimpleLineSymbol(I.call(this)),D.call(this,"fill")):"polyline"===s?r=new i.gisConstructor.SimpleLineSymbol(I.call(this)):"polygon"===s&&(r=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_NONE,new this.gisConstructor.SimpleLineSymbol(this.gisConstructor.SimpleLineSymbol.STYLE_DASHDOT,new this.gisConstructor.SimpleLineSymbol(I.call(this)),D.call(this,"fill")),new this.gisConstructor.Color(D.call(this,"fill"))));var h=new this.gisConstructor.graphic(t.geometry,r,{id:n,name:"图形标注"});R.add(h);var g=new this.gisConstructor.BufferParameters;g.bufferSpatialReference=this.map.spatialReference,g.outSpatialReference=this.map.spatialReference,g.distances=[Number(j.distances)||1],g.unit=this.gisConstructor.GeometryService.UNIT_METER,g.geodesic=!0,g.geometries=[h.geometry],new this.gisConstructor.GeometryService(j.GeometryServerURL||"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer").buffer(g,(function(t){var r=new i.gisConstructor.SimpleFillSymbol(i.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new i.gisConstructor.SimpleLineSymbol(I.call(e)),new i.gisConstructor.Color(D.call(e,"fill"))),s=new i.gisConstructor.graphic(t[0],r,{id:n,name:"图形标注"});R.add(s),z.call(i,s.geometry);var o=t[0].rings;console.log(o)}))}U.deactivate(),this.map.setMapCursor("default")}function Q(){R=new this.gisConstructor.GraphicsLayer({id:"绘制图层"},this.map.spatialReference),this.map.addLayer(R),U=new this.gisConstructor.draw(this.map,{showTooltips:!0}),U.on("draw-complete",V.bind(this))}function W(t,e){j=e,U||Q.call(this),"active"===t?(U.activate(e.type),this.map.setMapCursor("crosshair")):(U.deactivate(),this.map.setMapCursor("default"),R.clear(),this.map.infoWindow.hide()),this.map.on("click",H.bind(this))}var K={name:"DrawingGraphics",components:{},data:function(){return{map:"",gisConstructor:{},gisModules:["esri/map","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/geometryEngine","esri/tasks/GeometryService","esri/tasks/ProjectParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/query","esri/tasks/QueryTask","esri/tasks/BufferParameters","esri/graphic","esri/symbols/PictureMarkerSymbol","esri/symbols/TextSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/Font","esri/layers/GraphicsLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/toolbars/draw","esri/Color","dojo/_base/declare","dojo/number","esri/config","esri/geometry/normalizeUtils"]}},mounted:function(){this.init()},methods:{mapClickFun:function(){this.map.on("click",(function(){}))},drawingGraphicsTool:function(t,e){if(t&&e){var i={};"标绘"===t&&(i={name:"标绘",type:e}),"空间测量"===t&&(i={GeometryServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer",name:"空间测量",type:e}),"空间统计"===t&&(i={StatisticalServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces4/MapServer/0",GeometryServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer",distances:100,name:"空间统计",type:e}),W.call(this,"active",i)}else W.call(this,"clear")},init:function(){Object(g["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(g["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/init.js"}).then(this.initMap).then(this.mapClickFun)},initMap:function(t){for(var e in t){var i=this.gisModules[e].split("/").pop();this.gisConstructor[i]=t[e]}this.map=new this.gisConstructor.map("map-container",{basemap:"osm",logo:!1,slider:!0});var r={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax,new this.gisConstructor.SpatialReference));var s=new this.gisConstructor.ArcGISDynamicMapServiceLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces4/MapServer",{id:"StoryMapPlaces4",opacity:1,visible:!0});this.map.addLayer(s,2)}}},q=K,J=Object(c["a"])(q,T,O,!1,null,null,null),X=J.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[i("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999"}},[i("button",{on:{click:function(e){return t.addHeatMap(t.heatMapData,"count")}}},[t._v("热力图")]),i("button",{on:{click:function(e){return t.clearHeatMap()}}},[t._v("clear")])])])},_=[],$={name:"HeatMap",data:function(){return{heatMapData:[{x:-13043465.062410325,y:3857375.365345625,count:"10"},{x:-13041492.031617718,y:3857031.398718342,count:"100"},{x:-13041042.964076541,y:3855808.4062657813,count:"1000"},{x:-13044606.840520333,y:3854317.8842142224,count:"100"},{x:-13043035.104126222,y:3855120.4730112157,count:"10"}],map:"",gisConstructor:{},gisModules:["esri/SpatialReference","esri/graphic","esri/geometry/Point","esri/layers/FeatureLayer","esri/renderers/HeatmapRenderer","esri/geometry/Extent","esri/map"]}},mounted:function(){this.init()},methods:{clearHeatMap:function(){var t=this.map.getLayer("热力图");this.map.removeLayer(t)},addHeatMap:function(t,e){var i=e||"ID",r={geometryType:"esriGeometryPoint",fields:[{name:i,type:"esriFieldTypeInteger",alias:i}]},s={layerDefinition:r,featureSet:null},o=new this.gisConstructor.FeatureLayer(s,{mode:this.gisConstructor.FeatureLayer.MODE_SNAPSHOT,outFields:["*"],opacity:1,id:"热力图"}),n="",a=["rgba(255, 0, 0, 0)","rgb(0, 255, 0)","rgb(255, 255, 0)","rgb(255, 0, 0)"];n="ID"!==i?new this.gisConstructor.HeatmapRenderer({field:i,colors:a,blurRadius:10}):new this.gisConstructor.HeatmapRenderer({colors:a,blurRadius:50,maxPixelIntensity:200,minPixelIntensity:10}),o.setRenderer(n),this.map.addLayer(o,9);for(var c=0;c<t.length;c++){var l=new this.gisConstructor.Point(t[c].x,t[c].y,new this.gisConstructor.SpatialReference(this.map.spatialReference)),u=new this.gisConstructor.graphic(l);if("ID"!==i){var p=Number(t[c].count);u.setAttributes({count:p})}o.refresh(),o.add(u)}},mapClickFun:function(){this.map.on("click",(function(t){console.log(t)}))},init:function(){Object(g["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(g["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.mapClickFun)},initMap:function(t){for(var e in t){var i=this.gisModules[e].split("/").pop();this.gisConstructor[i]=t[e]}this.map=new this.gisConstructor.map("map-container",{basemap:"osm",logo:!1,slider:!0});var r={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax))}}},tt=$,et=Object(c["a"])(tt,Z,_,!1,null,null,null),it=et.exports;r["default"].use(p["a"]);var rt=[{path:"/",name:"初始化",component:v},{path:"/MapServer",name:"地图服务",component:x},{path:"/CustomSymbols",name:"自定义标注",component:P},{path:"/DrawingGraphics",name:"绘制工具",component:X},{path:"/HeatMap",name:"热力图",component:it}],st=new p["a"]({routes:rt}),ot=st,nt=i("2f62");r["default"].use(nt["a"]);var at=new nt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ct=i("5c96"),lt=i.n(ct);i("0fae"),i("7371");r["default"].use(lt.a),r["default"].config.productionTip=!1,new r["default"]({router:ot,store:at,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var r=i("9c0c"),s=i.n(r);s.a},7371:function(t,e,i){},"78e1":function(t,e,i){t.exports=i.p+"static/img/positioning.ffbf7689.gif"},"9c0c":function(t,e,i){},ad16:function(t,e){t.exports="data:image/png;base64,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"},c014:function(t,e,i){},ff2f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADC0lEQVR4nO2azZHqMAyAtwRKSAl0sCkhMwnnJykFLB2QDpYOlpvNXuCGzSXpADqADnY7yDsQ3iMmhPwbJ9GMTpoo8hdbluW8vTUoRBQAgN2kT6MEESMiCnTHoU1GAIgRIi51x6FNiChGxEh3HNpkBDBkAAAwSQCcdMeiRQDAJqKYiGLdsWiREcCQASDiOxEtrgAQ8Q8ATHXH1boQESDiz3XgqiLiT2/PBrdTPk8TCJbueBsXRFwVAZAo6I63UQGACSIeSgD4AoCJ7rgbESKCEgNXl4LZiREArCqDv4FgdpVIRPM6AIgoNnJXAICPvO2uykwwBoTv+05TAzdye0TEbRsAEg10j++pJH0+NfCj7/sOANhFNNk5fnsDoMr6RcRlbwDQpbCxivoAgCkinvoEYPA5YAQweADJJUghJaJj3wBABT9Z9UTQfMQNywMA8wp+wj4BiBExLKGPegeB+j6Xi6XHRVhXXS6+nE1YvwfRZRL0uJh7XMZNqcvkyiwATEaNAuCifv/BZAAel/XvKLIAIOKqjI+kk3QuDYDt7Fv77Hs/TQ9QzPPtLQHwfd+p4OfpYUgFkOUnD9CdvcUZcKDLTVBR/ay0BJ7MAHctUx/C2YSTTgAMPgeMADoDILYek8E/5WKbZ78UUd0AOBIRFG2JJQnwaUtMBZBVyb1EEuxqF3hZAFTyrg8ArCItMRWAy+XGW8vFVV0uN8oSCPPtxueAwSfBgQOYfe9Tt8kO21mpJaKzEGqjJWZMKUzVOkJZfoJU8GoSVL6wx3a2kgT1HIaoWk8w7FUOaKMlZhSALpKgy8XSYzv7v8ogZWdylbJntNSMBpAVz6skwU4AqKXw3TbXdwAuF6d0u1seyti7BBCoWvBHylwAxiTBrOcK/kqbC8Bl4uwxGV3VZeI8KAAO21m39vtSV2zV96pNE6MBZPlNJ0EZ3NmVrdJoAN5aLmbf+/erulx8DAvAMx0BPAXwWxtAsq21AkDtLapfrz6A+yRZFcI877z/AMA055ltVmPV2YQTl8lVIwCYjIr8H/AXsY86ef34CCsAAAAASUVORK5CYII="}});