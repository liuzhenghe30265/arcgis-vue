(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecf36f6c"],{"159b":function(e,t,r){var i=r("da84"),s=r("fdbc"),a=r("17c2"),o=r("9112");for(var n in s){var c=i[n],l=c&&c.prototype;if(l&&l.forEach!==a)try{o(l,"forEach",a)}catch(u){l.forEach=a}}},"17c2":function(e,t,r){"use strict";var i=r("b727").forEach,s=r("a640"),a=r("ae40"),o=s("forEach"),n=a("forEach");e.exports=o&&n?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"2ffe":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[r("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999",width:"200px"}},[r("el-tree",{ref:"tree2",attrs:{data:e.treeData2,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":e.handleCheckChange2}}),r("hr"),r("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":e.handleCheckChange}})],1)])},s=[],a=(r("4160"),r("c975"),r("d81d"),r("b0c0"),r("ac1f"),r("1276"),r("159b"),r("afaa")),o={name:"MapServer",data:function(){return{SF311Layer:null,DamageAssessmentLayer:null,haveSublayers:null,defaultProps:{children:"children",label:"label"},treeData2:[{label:"StoryMapPlaces5",id:"StoryMapPlaces5"},{label:"StoryMapPlaces7",id:"StoryMapPlaces7"}],treeData:[{label:"Cities",id:0},{label:"Highways",id:1},{label:"States",id:2},{label:"Counties",id:3}],map:"",gisConstructor:{},gisModules:["esri/SpatialReference","esri/Color","esri/symbols/TextSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/Font","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/geometryEngine","esri/layers/GraphicsLayer","esri/graphic","dojo/_base/declare","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/geometry/Extent","esri/map"]}},mounted:function(){this.init()},methods:{handleCheckChange2:function(){var e=this,t=this.$refs.tree2.getCheckedKeys(),r=this.treeData2.map((function(e){return e.label}));r.forEach((function(t){var r=e.map.getLayer(t);r.setVisibility(!1)})),t.forEach((function(t){var r=e.map.getLayer(t);r.setVisibility(!0)}))},handleCheckChange:function(){var e=this.$refs.tree.getCheckedKeys(),t=this.map.getLayer("DamageAssessment");t.setVisibility(!1),t.setVisibility(!0),t.setVisibleLayers(e)},loadLayersFun:function(){var e=this,t=[{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces5/MapServer",id:"StoryMapPlaces5",opacity:1,visible:!1,type:"dynamic"},{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces7/MapServer",id:"StoryMapPlaces7",opacity:1,visible:!1,type:"dynamic"},{url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",id:"DamageAssessment",opacity:.5,visible:!1,type:"dynamic"}];t.forEach((function(t){if("dynamic"===t.type){var r=new e.gisConstructor.ArcGISDynamicMapServiceLayer(t.url,{id:t.id,opacity:t.opacity||1,visible:t.visible});e.map.addLayer(r)}}));var r=this.map.getLayer("DamageAssessment");console.log(r.layerInfos),r.loaded?console.log(r.layerInfos):dojo.connect(r,"onLoad",(function(e){console.log(e.layerInfos)}));var i=new this.gisConstructor.GraphicsLayer({id:"高亮图层"});this.map.addLayer(i);var s=new this.gisConstructor.FeatureLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer/3",{mode:this.gisConstructor.FeatureLayer.MODE_ONDEMAND,outFields:["*"],opacity:0});this.map.addLayer(s),s.on("mouse-over",(function(t){var r=e.$refs.tree.getCheckedKeys();if(t.graphic&&r.indexOf(3)>-1){var s=t.graphic.attributes,a=t.graphic.geometry,o=(new e.gisConstructor.SimpleFillSymbol).setColor(new e.gisConstructor.Color([255,0,0,.3]));o.setOutline(new e.gisConstructor.SimpleLineSymbol(e.gisConstructor.SimpleLineSymbol.STYLE_SOLID,new e.gisConstructor.Color([255,0,0]),3));var n=new e.gisConstructor.graphic(a,o);i.add(n);var c=a.getExtent().getCenter(),l=new e.gisConstructor.TextSymbol(s.name,new e.gisConstructor.Font("12px"),new e.gisConstructor.Color([255,0,0])),u=e.gisConstructor.Color("#fff");l.setHaloColor(u).setHaloSize(2);var h=new e.gisConstructor.graphic(c,l,s);i.add(h)}else i.clear()})),s.on("mouse-out",(function(){i.clear()}))},mapClickFun:function(){this.map.on("click",(function(e){console.log(e)}))},init:function(){Object(a["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(a["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.loadLayersFun).then(this.mapClickFun)},initMap:function(e){for(var t in e){var r=this.gisModules[t].split("/").pop();this.gisConstructor[r]=e[t]}this.map=new this.gisConstructor.map("map-container",{basemap:"osm",logo:!1,slider:!0});var i={xmin:-178.217598382,ymin:18.921786345999976,xmax:-66.96927110500002,ymax:71.40623554799998};this.map.setExtent(new this.gisConstructor.Extent(i.xmin,i.ymin,i.xmax,i.ymax))}}},n=o,c=r("2877"),l=Object(c["a"])(n,i,s,!1,null,null,null);t["default"]=l.exports},4160:function(e,t,r){"use strict";var i=r("23e7"),s=r("17c2");i({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},a640:function(e,t,r){"use strict";var i=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&i((function(){r.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,r){var i=r("83ab"),s=r("9bf2").f,a=Function.prototype,o=a.toString,n=/^\s*function ([^ (]*)/,c="name";i&&!(c in a)&&s(a,c,{configurable:!0,get:function(){try{return o.call(this).match(n)[1]}catch(e){return""}}})},c975:function(e,t,r){"use strict";var i=r("23e7"),s=r("4d64").indexOf,a=r("a640"),o=r("ae40"),n=[].indexOf,c=!!n&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?n.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);